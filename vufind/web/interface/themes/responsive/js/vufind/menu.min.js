VuFind.Menu=function(){$(function(){VuFind.Menu.AllSideBarSelectors=VuFind.Menu.SideBarSearchSelectors+","+VuFind.Menu.SideBarAccountSelectors+","+VuFind.Menu.SideBarMenuSelectors;VuFind.Menu.stickyMenu("#horizontal-menu-bar-container","sticky-menu-bar");VuFind.Menu.stickyMenu("#vertical-menu-bar","sticky-sidebar")});return{SideBarSearchSelectors:"#home-page-search,#horizontal-search-container,#narrow-search-label,#facet-accordion,#results-sort-label,#results-sort-label+div.row,#remove-search-label,#remove-search-label+.applied-filters",SideBarAccountSelectors:"#home-page-login,#home-account-links",SideBarMenuSelectors:"#home-page-login,#home-page-library-section",ExploreMoreSelectorys:"",AllSideBarSelectors:"",stickyMenu:function(menuContainerSelector,stickyMenuClass){var menu=$(menuContainerSelector),viewportHeight=$(window).height(),switchPosition;if(menu.is(":visible"))switchPosition=menu.offset().top;$(window).resize(function(){viewportHeight=$(window).height()});$(window).scroll(function(){if(menu.is(":visible")&&viewportHeight<$("#main-content-with-sidebar").height()){if(typeof switchPosition=="undefined"){switchPosition=menu.offset().top}var fixedOffset=menu.offset().top,notFixedScrolledPosition=$(this).scrollTop();if(menu.is("."+stickyMenuClass)&&fixedOffset<=switchPosition){menu.removeClass(stickyMenuClass)}if(!menu.is("."+stickyMenuClass)&&notFixedScrolledPosition>=switchPosition){menu.addClass(stickyMenuClass)}}})},hideAll:function(){return $(VuFind.Menu.AllSideBarSelectors).filter(":visible").slideUp()},collapseSideBar:function(){if($(VuFind.Menu.AllSideBarSelectors).filter(":visible").length==0){$("#side-bar,#vertical-menu-bar-container").addClass("collapsedSidebar");$("#main-content-with-sidebar").addClass("mainContentWhenSiderbarCollapsed")}},openSideBar:function(){$("#main-content-with-sidebar").removeClass("mainContentWhenSiderbarCollapsed");$("#side-bar,#vertical-menu-bar-container").removeClass("collapsedSidebar")},showMenuSection:function(sectionSelector,clickedElement){$.when(this.hideAll()).done(function(){var elem=$(clickedElement);var parent=elem.parent(".menu-bar-option");if(parent.length>0){if(parent.is(".menu-icon-selected")){parent.removeClass("menu-icon-selected");VuFind.Menu.collapseSideBar()}else{$(".menu-bar-option").removeClass("menu-icon-selected");parent.addClass("menu-icon-selected");VuFind.Menu.openSideBar();$(sectionSelector).slideDown()}}else{VuFind.Menu.openSideBar();if(elem.is(".menu-icon-selected")){elem.removeClass("menu-icon-selected");$(sectionSelector).slideUp()}else{elem.addClass("menu-icon-selected");$(sectionSelector).slideDown()}}})},showSearch:function(clickedElement){var parent=$(clickedElement).parent(".menu-bar-option");if(parent&&!parent.is(".menu-icon-selected")&&$("#home-page-search,#narrow-search-label,#facet-accordion,#results-sort-label").length==0){$.when(this.hideAll()).done(function(){VuFind.Menu.collapseSideBar();$(".menu-bar-option").removeClass("menu-icon-selected");parent.addClass("menu-icon-selected");$("#horizontal-search-container").slideDown()})}else{this.showMenuSection(this.SideBarSearchSelectors,clickedElement)}},showMenu:function(clickedElement){this.showMenuSection(this.SideBarMenuSelectors,clickedElement)},showAccount:function(clickedElement){this.showMenuSection(this.SideBarAccountSelectors,clickedElement)},showExploreMore:function(clickedElement){this.showMenuSection(this.ExploreMoreSelectors,clickedElement)}}}(VuFind.Menu||{});